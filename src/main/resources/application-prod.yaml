# application-prod.yaml

# Jasypt 설정 (암호화)
jasypt:
  encryptor:
    bean: jasyptStringEncryptor
    password: pilyoga

# DB 설정
db-config:
  host: getx-mysql-test.cebci2gmpvew.ap-northeast-2.rds.amazonaws.com
  port: 3306
  name: fitnessTeachersDB
  username: jino
  password: ENC(1HDF9pxjaOsYt6VKXmIMSg==)

# Spring 설정
spring:
  datasource:
    url: jdbc:mysql://${db-config.host}:${db-config.port}/${db-config.name}
    username: ${db-config.username}
    password: ${db-config.password}
    hikari:
      maximum-pool-size: 20
      minimum-idle: 10
      idle-timeout: 300000
      max-lifetime: 1800000
  jpa:
    hibernate:
      ddl-auto: validate
      naming:
        physical-strategy: org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl
    show-sql: false
    properties:
      hibernate:
        format_sql: true
        dialect: org.hibernate.dialect.MySQL8Dialect

server:
  port: 443
  ssl:
    key-store: ${SSL_KEY_STORE}
    key-store-password: ${SSL_KEY_STORE_PASSWORD}
    key-store-type: PKCS12
    key-alias: tomcat

logging:
  level:
    root: WARN
    org.springframework: ERROR
    kr.getx.fitnessteachers: INFO
  file:
    name: /var/log/getx-ft-backend/application.log
  logback:
    rollingpolicy:
      max-file-size: 10MB
      max-history: 30

management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics
  endpoint:
    health:
      show-details: when_authorized